# gacha-expectation

本程序旨在为抽卡玩家对抽卡预期和预计资源提供信息<br>

version1.6
---
Update: 增加了递推算法计算期望的功能。目前仅对单up池开放，多up池因耗时较长暂未使用<br>
如需使用递推算法计算期望，可在主体程序结束运行后（即关闭窗体）在IDE内定义卡池参数后输入<br>
以明日方舟双up池为例: 
```
mrfz=step(0.02,0.7,2,50,99,0)
mrfz.calc(n,e,exp=12)
```
>n为总抽数<br>
>e为抽卡期望，以数组形式输入，例: [2]; [1,1]<br>
>exp为剪枝精度，概率低于10^(-exp)的概率分支将不再计算。如输入0则无剪枝<br>
>>警告! 对于多up池请谨慎输入参数exp的值，否则会由于极端小概率分支导致时间复杂度原地爆炸

version1.5
---
Update: 增加菜单栏和切换卡池类型（现支持递增概率模型和固定概率模型）<br>

version1.4
---
Update: 构建UI界面，增加自定义抽卡模型导入导出功能<br>
发布第一版可运行文件exe<br>

使用说明：当up角色数多于1个时，期望抽卡各角色数量用逗号分隔（不需空格）<br>

version1.3（废弃）
---
Update: 构建了新的IO接口，现在运行程序可选择一种类型卡池进行抽卡预期测算<br>
对于部分输入增加了合法性判断，在输入不合法数据时会提示合法输入格式<br>

version1.2
---
Update: 增加了程序的兼容性，现可对类似于明日方舟双up池等多up池的抽卡模型进行支持（暂不支持周年庆中副up，即某干员为其他干员几倍出率）<br>
现在在主体程序结束运行后（即是否继续后选择n）可以在IDE内输入
```
step(p,p_up,ups,thres,most,mg).smlt(n,e,times=100000)
```
>p为最高稀有度角色出率<br>
>p_up为up角色占最高稀有度角色出率的比例<br>
>ups为up角色数量<br>
>thres为触发保底机制的抽数下限<br>
>most为必出抽数<br>
>>也可输入触发保底机制后每次递增的概率<br>
>
>mg为大保底歪几必出（如无大保底机制输入0）<br>
>n为总抽数<br>
>e为期望抽卡结果（数组形式）<br>
>>E.g. 单up池中期望抽出三个up角色：e=[3]<br>
>>     双up池中期望抽全两个up角色：e=[1,1]<br>
>
>times为模拟次数（默认为1e6）<br>
结果返回达到期望结果的概率<br>

version1.1
---
Update: 更改了程序结构，在原有内容的基础上增加了对界限触发可变概率保底和固定概率有保底的抽卡模型的支持<br>
现在在主体程序结束运行后（即是否继续后选择n后）可以在IDE内输入
```
bound(p,p_up,most).prob(n)
```
>p为最高稀有度角色出率<br>
>p_up为up角色出率<br>
>most为硬保底抽数<br>
>n为总抽数<br>

结果返回达到目标up数的频率（保留四位小数）<br>


version1.0
---
`gacha.py`程序主体运行为原神抽卡计算器，通过大样本频率趋近于概率的方式进行相应概率计算<br>

未来更新预计为更多抽卡概率模型（可变概率，固定概率有保底/无保底，收藏品兑换……）提供支持，并提供自定义抽卡概率模型结果测算
